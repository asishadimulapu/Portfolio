"use strict";function handler(r,t){var n,o,s,a,u,i,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if("POST"!==r.method)return e.abrupt("return",t.status(405).json({message:"Method Not Allowed"}));e.next=2;break;case 2:if(n=r.body.prompt){e.next=5;break}return e.abrupt("return",t.status(400).json({error:"Prompt is required"}));case 5:if(o=process.env.GEMINI_API_KEY){e.next=8;break}return e.abrupt("return",t.status(500).json({error:"API key is not configured."}));case 8:return s="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=".concat(o),a={contents:[{role:"user",parts:[{text:n}]}],generationConfig:{responseMimeType:"application/json"}},e.prev=10,e.next=13,regeneratorRuntime.awrap(fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}));case 13:if((u=e.sent).ok){e.next=20;break}return e.next=17,regeneratorRuntime.awrap(u.text());case 17:return i=e.sent,console.error("Gemini API Error:",i),e.abrupt("return",t.status(u.status).json({error:"Gemini API error: ".concat(i)}));case 20:return e.next=22,regeneratorRuntime.awrap(u.json());case 22:c=e.sent,t.status(200).json(c),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(10),console.error("Internal Server Error:",e.t0),t.status(500).json({error:"Failed to fetch from Gemini API"});case 30:case"end":return e.stop()}},null,null,[[10,26]])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=handler;
//# sourceMappingURL=generate.min.js.map
